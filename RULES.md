# כללים — ריפו GPT (מקור אמת)

## עקרונות על
- אין דמו. לא כותבים "דמו". מוסיפים רק מה שנדרש בפועל לפי דרישות יניב.
- כל דרישה חדשה של יניב נכנסת לכללים הללו ונאכפת.
- אסור שיהיו כפילויות או סתירות בכללים. אם כלל חדש מתנגש בכלל ישן — מעדכנים את הכלל הישן במקום ליצור כפילות.

## מטרה
- זה אתר חי (GitHub Pages) להצגה, אבל המוצר הסופי הוא דפי משימות להדפסה.
- כל עמוד חייב להיות מותאם להדפסה בגודל A4 (210×297 מ״מ), עמוד אחד = דף אחד.

## מבנה ריפו
- כל עמוד הוא קובץ נפרד: `עמוד 1.html`, `עמוד 2.html`, `עמוד 3.html`, ...
- יש דף כניסה: `index.html` שמציג קישורים לכל העמודים.
- יש דף כללים חי: `rules.html` שנבנה אוטומטית מתוך `RULES.md`.

## הפרדה מוחלטת HTML / CSS
- כל העיצוב נמצא ב־`assets/style.css` בלבד.
- אסור CSS בתוך עמודי המשימות: אין `<style>` ואין `style=` בתוך `עמוד *.html`.

## עיצוב אחיד (A4)
- כותרת בכל עמוד: "פרופורציה" — כחול על לבן, פונט David, גודל 16pt, מיושר לימין.
- מתחת לכותרת: קו כחול לאורך כל רוחב העמוד.
- מספר עמוד: בצד שמאל, בתוך עיגול אדום.
- שאלות: כל שאלה מתחילה בנקודה שחורה (●).
- במצב הדפסה: רקע לבן נקי, ללא צללים דקורטיביים.

## איכות מתמטית וגרפית
- פונטים עבריים איכותיים ומותאמים להדפסה (David Libre / Heebo / Assistant).
- כתיב מתמטי עם MathJax 3 (SVG output).
- גרפים ושרטוטים מתמטיים/גיאומטריים יהיו באיכות הגבוהה ביותר שניתן במסגרת הפרויקט (וקטורי כשאפשר, מדויק, חד להדפסה).

## PDF אמיתי להורדה
- בכל עמוד יש כפתור “הורדת PDF” שעובד ומוריד קובץ PDF אמיתי.
- ה־PDFים נוצרים אוטומטית ב־Termux לתיקיית `pdf/` (למשל `pdf/עמוד 1.pdf`) ומועלים לריפו.
- אחרי כל שינוי בתוכן/עיצוב שמיועד להדפסה: מייצרים PDFs מחדש ואז עושים push.

## אוטומציות מחייבות
- `scripts/push.sh` הוא הדרך הרשמית לסנכרון (בודק כללים, בונה rules.html, commit+push).
- `scripts/new_page.sh N` יוצר עמוד חדש בעיצוב אחיד.
- `scripts/rebuild_index.sh` מעדכן `index.html` לפי העמודים הקיימים.
- `scripts/build_pdf.sh` מייצר PDFs אמיתיים לכל `עמוד *.html` אל `pdf/`.


- כל העיצוב נמצא ב־assets/style.css בלבד.
- אסור CSS בתוך עמודי המשימות: אין <style> ואין style= בתוך עמוד *.html.

## עקרונות מחייבים
- אין דמו: כותבים/מוסיפים רק מה שנדרש בפועל ונבדק שעובד.
- כל דף הוא עמוד להדפסה בגודל A4 בעיצוב אחיד.
- כל עמוד הוא קובץ נפרד: עמוד 1.html, עמוד 2.html וכן הלאה.
- כותרת בכל עמוד: "פרופורציה" — כחול על לבן, מיושר לימין, גודל 16 (David), עם קו כחול לאורך כל העמוד מתחת לכותרת.
- מספר עמוד: בצד שמאל בתוך עיגול אדום.

## סנכרון כללים ובקרת איכות
- כל דרישה חדשה → מעדכנים גם קבצים וגם את RULES.md (בלי כפילויות/סתירות).
- לפני כל push יש בדיקה אוטומטית: חוסר סעיפים / כפילויות / CSS בתוך עמודים.

## תוכן דפי העבודה
- לא כותבים כאן בצ׳אט את השאלות; השאלות נכתבות רק לקבצי העמודים באתר (עמוד X.html).
- בכל עמוד יש מקום לתלמיד לכתוב תשובה (קווי כתיבה) וניצול מלא של שטח A4.
- בכל מקבץ שאלות: דוגמה פתורה לפני המקטע + הסבר קצר וחכם במשפטים קצרים.
- משתמשים במשתנים שונים באנגלית לפי הצורך: לפעמים X, לפעמים Y.
- כותרת העמוד בנושא: "פרופורציה – יחסים שווים" (כותרת ראשית: פרופורציה).
- דפי עבודה להדפסה בלבד (A4), עם PDF אמיתי שנבנה אוטומטית ומורד מהכפתור.

## פרופורציה
- עמוד 1 עוסק בפרופורציה בלבד: "פרופורציה – יחסים שווים".
- הסברים קצרים וחכמים במשפטים קצרים.
- לפני כל מקבץ שאלות יש דוגמה פתורה קצרה.
- בתרגול: משתמשים לסירוגין במשתנים X ו-Y.
- בכל שאלה יש מקום כתיבה (קווי כתיבה) וניצול מלא של A4.
- PDF אמיתי: הכפתור מוריד pdf/עמוד 1.pdf שנבנה אוטומטית אחרי push.

## יומן עבודה (חובה להתעדכן אחרי כל פעולה)

### 2026-02-13 16:33
- דרישה/שינוי: chore: enable rules journal+normalize automation
- בוצע בפועל: נוספו scripts/note.sh + rules_normalize.py וחוזק push.sh
- המשך מתוכנן: מכאן כל שינוי יתועד ביומן הכללים אוטומטית

## מצב עבודה (נעילה)
- כרגע עובדים רק על עמוד 1 (עמוד 1.html). אסור ליצור/להחזיר עמודים נוספים עד דרישה מפורשת.

### 2026-02-13 16:36
- דרישה/שינוי: chore: lock repo to page1-only (enforced) + index updated
- בוצע בפועל: נוספה נעילה לעמוד 1 + index מציג רק עמוד 1 + rules_check אוכף
- המשך מתוכנן: עכשיו מתחילים לשפר את תוכן עמוד 1 (פרופורציה) ברמה גבוהה

### 2026-02-13 16:38
- דרישה/שינוי: feat: page1 proportion (A4) — concise definitions + solved examples + practice + answer space + PDF button
- בוצע בפועל: עודכן עמוד 1 לתוכן פרופורציה: הסבר קצר, דוגמאות פתורות, תרגול יחסים/מילוליות, מקום כתיבה, כפתור PDF (page-1)
- המשך מתוכנן: הבא: ללטש טיפוגרפיה/מרווחים ל-A4 מושלם + לבדוק שה-PDF נגיש דרך RAW/Pages ולעדכן RULES בהתאם

### 2026-02-13 16:40
- דרישה/שינוי: polish: page1 A4 pro layout + fix HTML typo (no inline CSS)
- בוצע בפועל: תוקן בעמוד 1 הטעות </ol>>. נוסף ליטוש A4 מקצועי ב-CSS בלבד: היררכיה, ריווחים, מניעת שבירת מקטעים, ניצול מקום לקווי תשובה, והסתרת כפתורים בהדפסה.
- המשך מתוכנן: הבא: בדיקת PDF בפועל (RAW עובד תמיד) + צילום מסך שלך של PDF/הדפסה כדי לכוון מיקרו-ריווחים.

## PDF אמיתי — הורדה עובדת תמיד
- ה-PDF נבנה אוטומטית על ידי GitHub Actions ונשמר בתיקייה pdf/.
- כפתור ההורדה מפנה ל-RAW (GitHub raw) כמקור אמת, כי GitHub Pages מחזיר 404 לתיקיית /pdf/.
- קישור RAW לעמוד 1:
  https://raw.githubusercontent.com/yanivmizrachiy/GPT/main/pdf/page-1.pdf

### 2026-02-13 17:02
- דרישה/שינוי: fix: document RAW as PDF source-of-truth (unicode safe)
- בוצע בפועל: עודכן RULES עם סעיף PDF אמיתי ללא תווי escape שבורים.
- המשך מתוכנן: הבא: ליטוש PDF טיפוגרפי מושלם לאחר צילום מסך.

### 2026-02-14 19:10
- דרישה/שינוי: fix: unblock rebase + safe RAW PDF href replacement
- בוצע בפועל: נפתרה חסימת rebase ע"י autostash. עודכן עמוד 1: כפתור PDF מפנה ל-RAW בצורה יציבה + הוזרק print.js בלי כפילויות.
- המשך מתוכנן: הבא: להוסיף גרף JSXGraph בעמוד 1 בצורה שמודפסת מושלם ב-A4.

### 2026-02-14 19:55
- דרישה/שינוי: feat: page1 add JSXGraph proportion demo (A4 print-safe, no inline CSS)
- בוצע בפועל: נוסף לעמוד 1 ייצוג גרפי מקצועי עם JSXGraph: תיבה גרפית A4 (CSS בלבד), קבצי JS נפרדים assets/graphs.js + assets/page1.js, והזרקה בטוחה ל-HTML בלי perl/regex שביר. אין CSS בתוך HTML.
- המשך מתוכנן: הבא: אתה שולח צילום מסך של RAW PDF → אני מכוונן מ״מ (גובה תיבה/ריווחים/שבירות) עד מושלם.


### 2026-02-14
- דרישה/שינוי: הוספת מנגנון הדפסה תקני (print.js) ללא inline JS
- בוצע בפועל: נוצר assets/print.js, עמוד 1 טוען אותו פעם אחת, כפתור הדפסה עובד דרך data-print
- המשך מתוכנן: צילום מסך PDF → כיוונון מ"מ (ריווחים/שבירות) + ליטוש גרף JSXGraph להדפסה

### 2026-02-14
- דרישה/שינוי: קיבוע ביצועים — עדכון חבילות שבועי בלבד (weekly_update)
- בוצע בפועל: נוצר scripts/weekly_update.sh + קיצור Termux:Widget 🧰 WEEKLY_UPDATE_GPT + alias weekly ב-.bashrc
- המשך מתוכנן: לאכוף ב-push.sh "אין Push בלי רישום יומן היום" (חסימה קשיחה)
### 2026-02-14
- דרישה/שינוי: אימות קשיחות — push.sh מחייב prepush + אין Push בלי רישום יומן היום
- בוצע בפועל: אומת/תוקן שהקריאה ל-scripts/prepush.sh קיימת פעם אחת ב-push.sh. תועד שהשגיאות else/fi היו שבירת הדבקה בטרמינל (לא תכנון).
- המשך מתוכנן: להקשיח audit+snapshot (אם נרצה), ואז לשדרג את עמוד 1: גרף JSXGraph פרינט-סייפ + מיקרו-ריווחים לפי צילום PDF.

## REQUIRED FILES
- עמוד 1.html
- assets/style.css
- assets/print.js
- rules.html
- כללים.md
- RULES.md

## REQUIRED SCRIPTS
- scripts/push.sh
- scripts/prepush.sh
- scripts/rules_check.sh
- scripts/build_rules.sh
- scripts/parse_rules.py
- scripts/print_guard.sh
- scripts/dev_mode.sh
- scripts/health.sh
- scripts/get_pdf.sh

## PRINT RULES
- אין inline CSS בתוך HTML (style= / <style>)
- חובה @media print בקבצי CSS
- עמוד 1 חייב להכיל container להדפסה (.page או .sheet)
- PDF הורדה מפנה ל-RAW כמקור אמת
- אין inline CSS בתוך HTML (אין <style> ואין style=)
- אין inline JS (כפתורים עובדים דרך data-attributes וקבצי JS נפרדים)
- CSS בלבד קובע עיצוב; חייב @media print + מידות A4 במ״מ
- מניעת שבירות: כותרות/שאלות/גרף לא נשברים באמצע
- הורדת PDF מפנה ל-RAW (GitHub raw) כמקור אמת

## GOVERNANCE
- אין Push בלי רישום יומן היום
- כל שינוי מתועד ביומן העבודה עם תאריך, מה בוצע ומה הלאה
- סנכרון = מחיקת מיותר/כפילויות/סתירות
- page1-only: אין עמודים 2-4
- יש דף כללים אחד: כללים.md הוא מקור האמת
- סנכרון = מחיקת מיותר/כפילויות/סתירות — רק מה שמשרת את ההמשך
- אין Push בלי רישום יומן היום (prepush חוסם)
- כל שינוי חייב לכלול: מה דרשת, מה בוצע בפועל, ומה הלאה
- page1-only: אין עמודים 2-4 עד החלטה מפורשת

## מדיניות אחוזי הצלחה
- בכל הודעה אליך אני כותב אחוז הצלחה אמיתי (בלי דמו)
- אם רשת/תלות חיצונית עלולה להפיל — זה מצוין מראש
- אחרי כל פקודה: מה עבד, מה לא, ומה נשאר

## תוכנית עבודה שאפתנית (Live Roadmap)
- 1) צילום PDF (RAW) -> כיוונון מ״מ: ריווחים/גובה שורה/שבירות עד מושלם
- 2) JSXGraph פרינט-סייפ: render סטטי להדפסה (SVG/תמונה) + בדיקה ב-PDF
- 3) Audit לפני Push: בדיקת RAW PDF 200 + בדיקת inline CSS/JS + חוזה מבני
- 4) שדרוג עמוד 1: היררכיה טיפוגרפית פרימיום + מניעת ״יתומים״ + שטחי תשובה מדויקים
- 5) הרחבה עתידית: רק אחרי שהעמוד הראשון מושלם ומאושר

### 2026-02-14 23:01
- דרישה/שינוי: chore: add QA_PRINT one-tap (dev_mode+pdf+open) + widget + document in rules
- בוצע בפועל: נוסף scripts/qa_print.sh + alias qa + קיצור 🖨️ QA_PRINT_GPT. עודכן יומן בכללים.md ושוקף ל-RULES.md.
- המשך מתוכנן: הבא: להריץ qa ולשלוח צילום מסך של ה-PDF כדי לכוון מ״מ A4 עד מושלם.
